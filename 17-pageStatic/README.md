# PHP页面静态化技术
### 01、页面静态化
* （1）将动态的数据以静态HTML呈现，即将数据库中的数据用HTML的格式展示出来，整个过程就叫静态化
* （2）静态化就是将数据库中的每一个内容都生成一个对应的HTML文件
* （3）静态化可以减少服务器压力
* （4）对于静态的html，apache会接收请求之后直接读取对应的文件，而对于动态的PHP，在过程中有PHP引擎解析，并且有数据交互，因此影响性能
* （5）对于静态的html效率受影响的只有磁盘的IO加载速度
* （6）页面静态化对浏览器有缓存功能，提高加载速度
* （7）页面静态化更佳安全，静态化的页面不接受任何参数
* （8）页面静态化更加符合搜索引擎优化
### 02、页面静态化适用场景
* （1）针对更新不是特别频繁的项目，例如：新闻门户、博客系统
* （2）针对更新频率较高的首页 （所谓频繁需要自己把控）
### 03、页面静态化的实现原理
* （1）对于静态化的实现只要能够获取到要输出的内容然后再写入到文件中即可（这里要注意，生成的文件目录及文件名必须有规律，方便后续生成具体访问地址）
* （2）在PHP中实现静态化的方式是OB缓存的方式来实现的
### 04、apache的程序缓存
* 当静态资源执行完毕后，程序缓存中的内容与apache提供的默认响应头进行封包操作，最后apache将结果进行响应
### 05、PHP的OB缓存
* （1）当PHP脚本执行完毕后，PHP会将OB缓存中的内容自动刷新到apache的程序缓存中，
程序缓存中的内容与apache提供的默认响应头进行封包操作，最后apache将结果进行响应
* （2）OB缓存可以手动开启或者关闭
* （3）OB缓存开启时，对于PHP中的任何输出内容优先放入到OB缓存中，如果碰到header/session/cookie等相关的会将具体的数据放入到程序缓存中
* （4）当PHP脚本执行完毕后PHP会自动的将OB缓存中的内容刷新到程序缓存中，当然也可以手动刷新
### 06、OB缓存中几个比较重要的函数
* （1）ob_start：开启OB缓存
* （2）ob_get_content：获取当前OB缓存中的内容
* （3）ob_clean：清空OB缓存中的内容
* （4）ob_end_clean：清空OB缓存中的内容并且关闭OB缓存
* （5）ob_flush：手动将OB缓存中的内容刷新到程序缓存
* （6）ob_end_flush：手动将OB缓存中的内容刷新到程序缓存并且关闭OB缓存
* （6）ob_get_level：获取OB缓存区的层次
### 07、OB缓存嵌套
* （1）当一个PHP文件多次使用ob_start函数那么开启了多个OB缓存区
* （2）对于多个OB缓存区他们之间具备一个层次的关系，但是对于每一个OB缓存区他们之间相互没有任何影响
### 08、使用OB缓存实现静态化
* （1）第一步：创建测试数据表并且写入数据
* （2）第二步：实现后台的更新操作，使用OB缓存针对每一个内容生成对应的HTML文件
* （3）第三步：显示前台的数据信息
### 09、伪静态
* （1）当访问某一个静态网页时，从URL地址栏上看到跟真静态（在web服务器上存在对应的静态网页文件）一模一样
* （2）但本质上web服务器上不存在对应的文件而是由动态语言进行解析的，此方式就是伪静态，如TP框架中每一个地址后缀的.html
* （3）有些网页本身不适合做真静态，例如商品详情页，数据经常变换，为了更佳符合搜素引擎优化，因此使用伪静态的方式，且伪静态后期扩展能力更强
* （4）伪静态后期可以使用负载均衡、分布式、内存缓存等技术提升性能
### 10、伪静态的实现方式
* （1）使用web服务器的重写机制实现（apache、nginx)
* （2）通过框架的路由实现
### 10、图片防盗链
* （1）什么是防盗链：为了防止别人直接使用自己项目里面的图片地址把图片显示在自己的项目上，从而增加自己服务器的压力、
* （2）解决办法：
   > * 对图片添加水印，非技术手段，别人依然能够使用图片地址，只是图片上显示图片是我的
   > * 使用apache的重写机制实现防盗链功能，技术手段
### 11、总结真静态与伪静态
* （1）真静态：
   > * 真实的生成HTML文件在服务器上，效率比较快
   > * 减少了PHP以及MySQL的服务器压力
   > * 增加了搜索引擎的优化体验
   > * 真静态是有真实的HTML文件存在，会需要占用很大的磁盘存储
   > * 对于真静态想再次或者进一步提升性能的能力有限
* （2）伪静态：
   > * 增加了搜索引擎的优化体验
   > * 性能扩展能力比较强
   > * 对于伪静态本质上是由PHP引擎进行解析的
